<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Visit Response</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #f8f9fa;
        }

        .response-card {
            max-width: 600px;
            margin: auto;
            margin-top: 90px;
        }

        @media (max-width: 576px) {
            .response-card {
                margin-top: 70px;
                padding: 10px;
            }

            .btn {
                width: 100%;
            }

            .btn + .btn {
                margin-top: 10px;
            }
        }
    </style>
</head>

<body>

<div class="container">

    <div class="card shadow-sm response-card">
        <div class="card-body">

            <h5 class="mb-4 text-center">
                ðŸ“„ Visit Response
            </h5>

            <p class="fw-semibold text-center">
                Loan: {{ obj.loanno }}
            </p>

            <form method="post">
                {% csrf_token %}

                <!-- Visit Status -->
                <div class="mb-3">
                    <label class="form-label fw-semibold">
                        Visit Status
                    </label>
                    <select name="visit_status"
                            id="status"
                            class="form-select"
                            required>
                        <option value="">-- Select --</option>
                        <option value="visited">Yes (Visited)</option>
                        <option value="not_visited">No (Not Visited)</option>
                    </select>
                </div>

                <!-- Reason -->
                <div class="mb-3" id="reasonBox" style="display:none">
                    <label class="form-label fw-semibold">
                        Reason
                    </label>
                    <textarea name="not_visited_reason"
                              class="form-control"
                              rows="3"
                              placeholder="Enter reason if not visited"></textarea>
                </div>

                <!-- Buttons -->
                <div class="d-flex flex-wrap gap-2 mt-4">
                    <button type="submit" class="btn btn-success flex-fill">
                        Submit
                    </button>

                    <a href="{% url 'executive_my_visits' %}"
                       class="btn btn-secondary flex-fill">
                        Back
                    </a>
                </div>

            </form>

        </div>
    </div>

</div>

<!-- Toggle Reason -->
<script>
document.getElementById("status").addEventListener("change", function () {
    document.getElementById("reasonBox").style.display =
        this.value === "not_visited" ? "block" : "none";
});
</script>

</body>
</html>
